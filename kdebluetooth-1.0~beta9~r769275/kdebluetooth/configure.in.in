#MIN_CONFIG(3.0.0)

AM_INIT_AUTOMAKE(kdebluetooth, 1.00-beta8)
AC_C_BIGENDIAN
AC_CHECK_KDEMAXPATHLEN

KDEBLUETOOTH_VERSION=1.00-beta8

# KDE_EXPAND_MAKEVAR(KDEBLUETOOTH_VERSION, KDEBLUETOOTH_VERSION)
# AC_SUBST(KDEBLUETOOTH_VERSION)
AC_DEFINE_UNQUOTED(KDEBLUETOOTH_VERSION, "$KDEBLUETOOTH_VERSION", [version of the kdebluetooth package])

# DBUS
PKG_CHECK_MODULES(DBUS, "dbus-1")

AC_SUBST(DBUS_CFLAGS)
AC_SUBST(DBUS_LIBS)	

# DBUS QT BINDING ### stolen from kpowersave and knetworkmanager ;) #	
CPPFLAGS="$CPPFLAGS $DBUS_CFLAGS $all_includes -DDBUS_API_SUBJECT_TO_CHANGE"
AC_LANG_SAVE
AC_LANG_CPLUSPLUS
AC_CHECK_HEADER([dbus/connection.h],,[AC_MSG_ERROR([You need D-BUS/Qt3 bindings])])
AC_CHECK_HEADER([dbus/message.h],,[AC_MSG_ERROR([You need D-BUS/Qt3 bindings])])
CPPFLAGS=$safe_CPPFLAGS
AC_LANG_RESTORE

# OBEXFTP
AC_CHECK_HEADER([obexftp/obexftp.h],,[AC_MSG_ERROR([kio_obex need obexftp])])

# BLUEZ
PKG_CHECK_MODULES(BLUETOOTH, "bluez")

AC_SUBST(BLUETOOTH_CFLAGS)
AC_SUBST(BLUETOOTH_LIBS)	

