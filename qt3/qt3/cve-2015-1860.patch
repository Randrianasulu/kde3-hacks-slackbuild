From 538d6a2440fbe645b970402fa7e86dfd3e36192b Mon Sep 17 00:00:00 2001
From: Sl√°vek Banko <slavek.banko@axis.cz>
Date: Sat, 23 May 2015 16:48:51 +0000
Subject: Fix security issue CVE-2015-1860

[taken from RedHat Qt3 patches]
---
diff --git a/src/kernel/qasyncimageio.cpp b/src/kernel/qasyncimageio.cpp
index e16125b..7be8ddb 100644
--- a/src/kernel/qasyncimageio.cpp
+++ b/src/kernel/qasyncimageio.cpp
@@ -1226,6 +1226,8 @@ void QGIFFormat::fillRect(QImage& img, int col, int row, int w, int h, QRgb colo
 
 void QGIFFormat::nextY(QImage& img, QImageConsumer* consumer)
 {
+    if (out_of_bounds)
+        return;
     int my;
     switch (interlace) {
       case 0:
--
cgit v0.9.0.2-52-g1de3
